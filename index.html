<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Sao Đỏ – Bảng xếp hạng</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#eef2ff;
  padding:20px;
}

h1{
  text-align:center;
  color:#0b3cff;
}

.container{
  gap:20px;
  display:flex;
}

/* ===== BẢNG LỚP ===== */
table{
  border-collapse:collapse;
  background:white;
  box-shadow:0 0 10px rgba(0,0,0,0.1);
}

th,td{
  border:1px solid #ccc;
  padding:10px;
  text-align:center;
}

th{
  background:#0b3cff;
  color:white;
}

.lop{
  cursor:pointer;
}
.lop:hover{
  background:#e0e7ff;
}

/* ===== KHUNG NHẬP LỖI ===== */
#khungLoi{
  flex:1;
  background:#dbeafe;
  padding:15px;
  border-radius:10px;
  display:none;
}

#khungLoi h2{
  margin-top:0;
  color:#0b3cff;
}

.loi{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
}

button{
  margin-top:10px;
  padding:8px 16px;
  border:none;
  background:#0b3cff;
  color:white;
  border-radius:5px;
  cursor:pointer;
}

button:hover{
  background:#082ca3;
}
</style>
</head>

<body>

<h1>BẢNG XẾP HẠNG SAO ĐỎ 
  trường TH&THCS PHƯỚC AN </h1>

<div class="container">

<!-- ===== BẢNG XẾP HẠNG ===== -->
<table id="bang">
<tr>
  <th>XH</th>
  <th>Lớp</th>
  <th>Điểm gốc</th>
  <th>Tổng điểm</th>
</tr>

<!-- 12 LỚP -->
<tr class="lop" onclick="chonLop(this,'6A')"><td class="xephang"></td><td>6A</td><td>100</td><td class="tong">100</td></tr>
<tr class="lop" onclick="chonLop(this,'6B')"><td class="xephang"></td><td>6B</td><td>100</td><td class="tong">100</td></tr>
<tr class="lop" onclick="chonLop(this,'6C')"><td class="xephang"></td><td>6C</td><td>100</td><td class="tong">100</td></tr>

<tr class="lop" onclick="chonLop(this,'7A')"><td class="xephang"></td><td>7A</td><td>100</td><td class="tong">100</td></tr>
<tr class="lop" onclick="chonLop(this,'7B')"><td class="xephang"></td><td>7B</td><td>100</td><td class="tong">100</td></tr>
<tr class="lop" onclick="chonLop(this,'7C')"><td class="xephang"></td><td>7C</td><td>100</td><td class="tong">100</td></tr>

<tr class="lop" onclick="chonLop(this,'8A')"><td class="xephang"></td><td>8A</td><td>100</td><td class="tong">100</td></tr>
<tr class="lop" onclick="chonLop(this,'8B')"><td class="xephang"></td><td>8B</td><td>100</td><td class="tong">100</td></tr>
<tr class="lop" onclick="chonLop(this,'8C')"><td class="xephang"></td><td>8C</td><td>100</td><td class="tong">100</td></tr>

<tr class="lop" onclick="chonLop(this,'9A')"><td class="xephang"></td><td>9A</td><td>100</td><td class="tong">100</td></tr>
<tr class="lop" onclick="chonLop(this,'9B')"><td class="xephang"></td><td>9B</td><td>100</td><td class="tong">100</td></tr>
<tr class="lop" onclick="chonLop(this,'9C')"><td class="xephang"></td><td>9C</td><td>100</td><td class="tong">100</td></tr>
</table>

<!-- ===== KHUNG NHẬP LỖI ===== -->
<div id="khungLoi">
  <h2 id="tenLop">Lớp</h2>

  <!-- KHUNG LỖI (TẠM – CHỜ BẠN ĐƯA BẢNG LỖI CHUẨN) -->
  <div class="loi">Đi học muộn <input type="number" value="0" data-diem="2"></div>
  <div class="loi">Không đồng phục <input type="number" value="0" data-diem="3"></div>
  <div class="loi">Nói chuyện <input type="number" value="0" data-diem="1"></div>

  <button onclick="apDungLoi()">Áp dụng lỗi</button>
</div>

</div>

<script>
let lopDangChon = null;

function chonLop(row, ten){
  lopDangChon = row;
  document.getElementById("khungLoi").style.display="block";
  document.getElementById("tenLop").innerText="Nhập lỗi lớp " + ten;
}

function apDungLoi(){
  let inputs = document.querySelectorAll("#khungLoi input");
  let tru = 0;

  inputs.forEach(i=>{
    tru += Number(i.value) * Number(i.dataset.diem);
  });

  let tong = 100 - tru;
  lopDangChon.querySelector(".tong").innerText = tong;

  xepHang();
}

function xepHang(){
  let rows = Array.from(document.querySelectorAll(".lop"));
  rows.sort((a,b)=>
    b.querySelector(".tong").innerText - a.querySelector(".tong").innerText
  );

  rows.forEach((r,i)=>{
    let xh = i+1;
    if(xh==1) xh="1";
    if(xh==2) xh="2";
    if(xh==3) xh="3";
    r.querySelector(".xephang").innerText=xh;
  });
}
</div> <!-- MÀN HÌNH 1: BẢNG XẾP HẠNG -->
<div id="manHinh1">
  <table id="bang">
    ...
  </table>
</div>
</script>

</body>
</html>

