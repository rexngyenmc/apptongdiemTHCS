<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SAO Äá» PHÆ¯á»šC AN</title>

<style>
:root{
 --p:#2563eb; --s:#16a34a; --a:#dc2626; --bg:#f1f5f9;
}
*{box-sizing:border-box}
body{margin:0;padding:10px;font-family:Arial;background:var(--bg)}

#login{
 position:fixed; inset:0;
 background:linear-gradient(135deg,#2563eb,#38bdf8);
 display:flex;flex-direction:column;justify-content:center;align-items:center;
 color:white; z-index:10;
}
#login input{
 width:170px;padding:14px;font-size:2rem;
 border:none;border-radius:14px;text-align:center;
}

h2,h3{text-align:center;color:#1e40af}

.card{
 background:white;border-radius:16px;
 padding:12px;margin-bottom:12px;
 box-shadow:0 6px 14px rgba(0,0,0,.1);
 animation:fade .3s ease;
}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1}}

table{width:100%;border-collapse:collapse;font-size:.8rem}
th,td{border:1px solid #333;padding:6px;text-align:center}
th{background:#f2f2f2}

input.name{width:100%;padding:6px;border:1px solid #aaa;border-radius:6px}
input.qty{width:50px;padding:6px;border:1px solid #aaa;border-radius:6px;text-align:center}

button{
 width:100%;padding:12px;border:none;border-radius:12px;
 background:linear-gradient(135deg,#2563eb,#38bdf8);
 color:white;font-weight:bold;margin-top:8px;
 transition:.15s;
}
button:active{transform:scale(.95)}

.minus{color:var(--a);font-weight:bold}
.plus{color:var(--s);font-weight:bold}
</style>
</head>

<body>

<!-- Ã‚M THANH -->
<audio id="clickSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="saveSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>

<!-- LOGIN -->
<div id="login">
 <h2>ğŸ” Máº¬T MÃƒ SAO Äá»</h2>
 <input id="pin" type="password" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
</div>

<div id="app" style="display:none">

<!-- BXH -->
<div class="card">
<h3>ğŸ† Báº¢NG Xáº¾P Háº NG</h3>
<table>
<thead><tr><th>Háº¡ng</th><th>Lá»›p</th><th>Äiá»ƒm</th></tr></thead>
<tbody id="bxh"></tbody>
</table>
</div>

<!-- NHáº¬P LIá»†U -->
<div id="panel" class="card" style="display:none">
<h3 id="lopTitle"></h3>

<table>
<thead>
<tr>
 <th>Ná»™i dung</th>
 <th>Biá»ƒu Ä‘iá»ƒm</th>
 <th>Viá»‡c lÃ m tá»‘t / khÃ´ng tá»‘t</th>
 <th>Sá»‘ láº§n</th>
 <th>Äiá»ƒm</th>
</tr>
</thead>
<tbody id="inputBody"></tbody>
<tr>
 <td colspan="4" style="text-align:right">Tá»•ng:</td>
 <td id="tong">0</td>
</tr>
</table>

<button onclick="playSave(); saveData()">ğŸ’¾ LÆ¯U VÃ€O Lá»šP</button>
</div>

</div>

<script>
// ===== Ã‚M THANH =====
function playClick(){ document.getElementById("clickSound").play(); }
function playSave(){ document.getElementById("saveSound").play(); }

// ===== Cáº¤U HÃŒNH =====
const PIN="1234";
const LOPS=["6A1","6A2","6A3","7A1","7A2","8A1","8A2","9A1","9A2"];

const LOIS=[
 {n:"KhÃ´ng Ä‘eo KhÄƒn quÃ ng/Huy hiá»‡u",d:-5},
 {n:"KhÃ´ng bá» Ã¡o vÃ o quáº§n",d:-5},
 {n:"Äi trá»…",d:-2},
 {n:"NÃ³i tá»¥c, chá»­i thá»",d:-10},
 {n:"ÄÃ¡nh nhau",d:-10},
 {n:"KhÃ´ng lÃ m bÃ i táº­p",d:-10},
 {n:"Äiá»ƒm sá»‘: 10",d:10},
 {n:"Nháº·t Ä‘Æ°á»£c cá»§a rÆ¡i tráº£ láº¡i",d:5},
];

// ===== BIáº¾N =====
let db=JSON.parse(localStorage.getItem("SAODO_FULL"))||{};
let cur="";

// ===== LOGIN =====
pin.addEventListener("input",()=>{
 let v=pin.value;
 if(v===PIN){
  login.style.display="none";
  app.style.display="block";
  init();
 }else if(v.length===4){
  alert("Sai PIN"); pin.value="";
 }
});

// ===== KHá»I Táº O =====
function init(){
 LOPS.forEach(l=>{ if(!db[l]) db[l]={total:100,logs:[]}; });
 renderBXH();
 renderInput();
}

// ===== BXH =====
function renderBXH(){
 bxh.innerHTML="";
 [...LOPS].sort((a,b)=>db[b].total-db[a].total).forEach((l,i)=>{
  bxh.innerHTML+=`
<tr onclick="playClick(); chonLop('${l}')">
<td>${i+1}</td><td>${l}</td>
<td class="${db[l].total<100?'minus':'plus'}">${db[l].total}</td>
</tr>`;
 });
 localStorage.setItem("SAODO_FULL",JSON.stringify(db));
}

// ===== CHá»ŒN Lá»šP =====
function chonLop(l){
 cur=l;
 panel.style.display="block";
 lopTitle.innerText="CHáº¤M ÄIá»‚M Lá»šP "+l;
 resetInput();
}

// ===== Táº O Báº¢NG =====
function renderInput(){
 inputBody.innerHTML="";
 LOIS.forEach((e,i)=>{
  inputBody.innerHTML+=`
<tr>
<td style="text-align:left">${e.n}</td>
<td class="${e.d<0?'minus':'plus'}">${e.d}</td>
<td><input class="name" id="n${i}" placeholder="TÃªn HS..."></td>
<td><input class="qty" id="q${i}" type="number" value="1" min="1" oninput="calc()"></td>
<td id="s${i}">0</td>
</tr>`;
 });
}

// ===== RESET =====
function resetInput(){
 LOIS.forEach((_,i)=>{
  document.getElementById("n"+i).value="";
  document.getElementById("q"+i).value=1;
  document.getElementById("s"+i).innerText=0;
 });
 tong.innerText=0;
}

// ===== TÃNH =====
function calc(){
 let t=0;
 LOIS.forEach((e,i)=>{
  let sl=parseInt(document.getElementById("q"+i).value)||0;
  let diem=e.d*sl;
  document.getElementById("s"+i).innerText=diem;
  t+=diem;
 });
 tong.innerText=t;
}

// ===== LÆ¯U =====
function saveData(){
 LOIS.forEach((e,i)=>{
  let name=document.getElementById("n"+i).value.trim();
  let sl=parseInt(document.getElementById("q"+i).value)||0;
  if(name && sl>0){
   let diem=e.d*sl;
   db[cur].logs.push({n:e.n,hs:name,sl,diem});
   db[cur].total+=diem;
  }
 });
 renderBXH();
 resetInput();
 alert("ÄÃ£ lÆ°u cho lá»›p "+cur);
}
</script>

</body>
</html>
