<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SAO ƒê·ªé PH∆Ø·ªöC AN - 2026</title>
    <style>
        :root { --p: #4361ee; --s: #2ec4b6; --a: #e71d36; --bg: #f8f9fa; --txt: #2b2d42; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--txt); margin: 0; padding: 15px; }
        
        .header { text-align: center; padding: 20px 0; background: linear-gradient(135deg, var(--p), #7209b7); color: white; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 20px rgba(67, 97, 238, 0.2); }
        .header h2 { margin: 0; letter-spacing: 1px; }

        /* Danh s√°ch l·ªõp d·∫°ng √¥ vu√¥ng ƒë·∫πp m·∫Øt */
        .grid-lops { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 12px; margin-bottom: 20px; }
        .lop-card { background: white; padding: 15px 10px; border-radius: 15px; text-align: center; border: 2px solid transparent; transition: 0.3s; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .lop-card.active { border-color: var(--p); background: #edf2ff; transform: translateY(-5px); }
        .lop-card b { display: block; font-size: 1.2rem; margin-bottom: 5px; }
        .lop-card span { font-size: 0.9rem; font-weight: bold; color: var(--p); }

        /* Khu v·ª±c nh·∫≠p ƒëi·ªÉm */
        .main-card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); display: none; }
        .sticky-top { position: sticky; top: 10px; background: white; z-index: 100; padding-bottom: 15px; }
        
        input[type="text"] { width: 100%; padding: 15px; border-radius: 12px; border: 2px solid #e0e0e0; font-size: 1rem; box-sizing: border-box; transition: 0.3s; margin-top: 10px; }
        input[type="text"]:focus { border-color: var(--p); outline: none; box-shadow: 0 0 10px rgba(67, 97, 238, 0.1); }

        /* Danh s√°ch l·ªói trang tr√≠ ƒë·∫πp */
        .scroll-loi { max-height: 400px; overflow-y: auto; margin: 15px 0; padding-right: 5px; }
        .nhom-loi { margin-top: 20px; }
        .nhom-title { font-size: 0.8rem; font-weight: bold; color: #8d99ae; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; border-left: 4px solid var(--p); padding-left: 8px; }
        
        .loi-item { display: flex; align-items: center; background: #fdfdfd; padding: 12px; border-radius: 12px; margin-bottom: 8px; border: 1px solid #f0f0f0; transition: 0.2s; cursor: pointer; }
        .loi-item:active { background: #f0f0f0; }
        .loi-item input { width: 22px; height: 22px; margin-right: 15px; accent-color: var(--p); }
        .loi-item .ten { flex: 1; font-size: 0.95rem; font-weight: 500; }
        .loi-item .diem { font-weight: bold; font-size: 0.9rem; }
        .diem.tru { color: var(--a); }
        .diem.cong { color: var(--s); }

        /* N√∫t x√°c nh·∫≠n */
        .btn-xacnhan { width: 100%; padding: 18px; border-radius: 15px; border: none; background: var(--p); color: white; font-size: 1.1rem; font-weight: bold; cursor: pointer; box-shadow: 0 8px 15px rgba(67, 97, 238, 0.3); transition: 0.3s; }
        .btn-xacnhan:active { transform: scale(0.98); }

        /* Nh·∫≠t k√Ω */
        .log-box { margin-top: 20px; background: #fffcf2; border-radius: 12px; padding: 15px; border: 1px dashed #ccc; }
        .log-item { font-size: 0.85rem; padding: 5px 0; border-bottom: 1px solid #eee; }
        
        .footer-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .btn-small { padding: 10px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<div class="header">
    <h2>üåü SAO ƒê·ªé PH∆Ø·ªöC AN</h2>
    <p style="margin:5px 0 0 0; opacity:0.8; font-size:0.8rem;">H·ªá Th·ªëng Qu·∫£n L√Ω Thi ƒêua M·ªõi</p>
</div>

<div class="grid-lops" id="ds-lop">
    </div>

<div class="main-card" id="vung-cham">
    <div class="sticky-top">
        <h3 id="dang-cham-lop" style="margin:0; color:var(--p)">L·ªõp --</h3>
        <input type="text" id="input-ten" placeholder="üë§ Nh·∫≠p t√™n h·ªçc sinh (v√≠ d·ª•: An, B√¨nh)...">
    </div>

    <div class="scroll-loi">
        <div class="nhom-loi">
            <div class="nhom-title">T√°c phong & ƒê·ªìng ph·ª•c</div>
            <label class="loi-item"><input type="checkbox" class="ck" data-d="-5" data-n="KhƒÉn qu√†ng"> <span class="ten">KhƒÉn qu√†ng / Huy hi·ªáu</span> <span class="diem tru">-5</span></label>
            <label class="loi-item"><input type="checkbox" class="ck" data-d="-5" data-n="B·ªè √°o ngo√†i"> <span class="ten">Kh√¥ng b·ªè √°o v√†o qu·∫ßn</span> <span class="diem tru">-5</span></label>
            <label class="loi-item"><input type="checkbox" class="ck" data-d="-5" data-n="T√°c phong"> <span class="ten">M·∫∑c √°o kho√°c sai quy ƒë·ªãnh</span> <span class="diem tru">-5</span></label>
        </div>

        <div class="nhom-loi">
            <div class="nhom-title">K·ª∑ lu·∫≠t & Chuy√™n c·∫ßn</div>
            <label class="loi-item"><input type="checkbox" class="ck" data-d="-2" data-n="ƒêi tr·ªÖ"> <span class="ten">ƒêi h·ªçc tr·ªÖ</span> <span class="diem tru">-2</span></label>
            <label class="loi-item"><input type="checkbox" class="ck" data-d="-10" data-n="N√≥i t·ª•c"> <span class="ten">N√≥i t·ª•c, ch·ª≠i th·ªÅ</span> <span class="diem tru">-10</span></label>
            <label class="loi-item"><input type="checkbox" class="ck" data-d="-10" data-n="Tr·ªën ti·∫øt"> <span class="ten">Tr·ªën ti·∫øt / B·ªè ti·∫øt</span> <span class="diem tru">-10</span></label>
        </div>

        <div class="nhom-loi">
            <div class="nhom-title">H·ªçc t·∫≠p & Vi·ªác t·ªët</div>
            <label class="loi-item"><input type="checkbox" class="ck" data-d="10" data-n="ƒêi·ªÉm 10"> <span class="ten">ƒê·∫°t ƒëi·ªÉm 10</span> <span class="diem cong">+10</span></label>
            <label class="loi-item"><input type="checkbox" class="ck" data-d="5" data-n="Vi·ªác t·ªët"> <span class="ten">Vi·ªác t·ªët / C·ªßa r∆°i</span> <span class="diem cong">+5</span></label>
        </div>
    </div>

    <button class="btn-xacnhan" onclick="luuDiem()">‚úÖ X√ÅC NH·∫¨N ƒê·ª¢T N√ÄY</button>

    <div class="log-box" id="nhat-ky">
        <i>L·ªãch s·ª≠ ch·∫•m s·∫Ω hi·ªán ·ªü ƒë√¢y...</i>
    </div>
</div>

<div class="footer-btns">
    <button class="btn-small" style="background:#0068ff; color:white;" onclick="copyZalo()">üìã Copy Zalo</button>
    <button class="btn-small" style="background:#ced4da;" onclick="if(confirm('X√≥a h·∫øt d·ªØ li·ªáu tu·∫ßn n√†y?')) {localStorage.clear(); location.reload();}">üîÑ Reset Tu·∫ßn</button>
</div>

<script>
    const lops = ['6A','6B','6C','7A','7B','7C','8A','8B','8C','9A','9B'];
    let db = JSON.parse(localStorage.getItem('pa_2026_beauty')) || {};
    let cur = "";

    // V·∫Ω danh s√°ch l·ªõp ƒë·∫πp m·∫Øt
    function veLop() {
        let html = "";
        lops.forEach(l => {
            let diem = db[l] ? db[l].total : 100;
            html += `<div class="lop-card ${cur==l?'active':''}" id="card-${l}" onclick="chonLop('${l}')">
                        <b>${l}</b>
                        <span>${diem}ƒë</span>
                    </div>`;
        });
        document.getElementById('ds-lop').innerHTML = html;
    }

    function chonLop(l) {
        cur = l;
        veLop();
        document.getElementById('vung-cham').style.display = "block";
        document.getElementById('dang-cham-lop').innerText = "ƒêang ch·∫•m L·ªõp " + l;
        document.getElementById('vung-cham').scrollIntoView({behavior: "smooth"});
        inLog();
    }

    function luuDiem() {
        const tenVal = document.getElementById('input-ten').value.trim();
        const dsTen = tenVal.split(/[,.;]+/).filter(x => x.trim().length > 0);
        const cks = Array.from(document.querySelectorAll('.ck:checked'));

        if (cks.length === 0) return alert("‚ùå B·∫°n ch∆∞a ch·ªçn l·ªói n√†o!");
        if (dsTen.length === 0) return alert("‚ùå B·∫°n ch∆∞a nh·∫≠p t√™n h·ªçc sinh!");

        if (!db[cur]) db[cur] = { total: 100, logs: [] };

        let dotDiem = 0;
        let tenLoi = [];

        cks.forEach(ck => {
            let diem = parseInt(ck.dataset.d);
            dotDiem += (diem * dsTen.length);
            tenLoi.push(ck.dataset.n);
        });

        // C·∫≠p nh·∫≠t ƒëi·ªÉm & Nh·∫≠t k√Ω
        db[cur].total += dotDiem;
        db[cur].logs.unshift(`${new Date().toLocaleTimeString('vi-VN',{hour:'2-digit',minute:'2-digit'})}: ${dotDiem}ƒë - ${tenVal} (${tenLoi.join(',')})`);

        // QUAN TR·ªåNG: B·∫•m xong l√† x√≥a s·∫°ch ƒë·ªÉ nh·∫≠p ƒë·ª£t m·ªõi
        document.getElementById('input-ten').value = "";
        cks.forEach(ck => ck.checked = false);

        localStorage.setItem('pa_2026_beauty', JSON.stringify(db));
        veLop();
        inLog();
        alert("‚úÖ ƒê√£ l∆∞u th√†nh c√¥ng!");
    }

    function inLog() {
        const box = document.getElementById('nhat-ky');
        if (!db[cur] || db[cur].logs.length === 0) {
            box.innerHTML = "<i>Ch∆∞a c√≥ d·ªØ li·ªáu l·ªõp n√†y.</i>";
            return;
        }
        box.innerHTML = "<b>L·ªãch s·ª≠ ch·∫•m:</b><br>" + db[cur].logs.map(i => `<div class="log-item">${i}</div>`).join("");
    }

    function copyZalo() {
        let msg = "üìä THI ƒêUA PH∆Ø·ªöC AN\n";
        lops.forEach(l => msg += `L·ªõp ${l}: ${db[l] ? db[l].total : 100}ƒë\n`);
        navigator.clipboard.writeText(msg).then(() => alert("ƒê√£ copy b√°o c√°o!"));
    }

    veLop();
</script>
</body>
</html>
