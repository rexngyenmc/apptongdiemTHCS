<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEB SAO ƒê·ªé PH∆Ø·ªöC AN</title>
    <style>
        :root { --blue-primary: #0056b3; --gray-bg: #f8f9fa; --green-success: #28a745; --red-error: #dc3545; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--gray-bg); margin: 0; padding: 15px; }
        
        /* Header giao di·ªán c≈© */
        .header-title { background: white; padding: 15px; border-radius: 10px; border: 1px solid #dee2e6; color: var(--blue-primary); text-align: center; font-weight: bold; margin-bottom: 20px; text-transform: uppercase; }

        /* Khung t√¨m ki·∫øm */
        .search-box { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 15px; box-sizing: border-box; font-size: 1rem; }

        /* Danh s√°ch l·ªói - Giao di·ªán nh∆∞ ·∫£nh 63d2e8.png */
        .section-card { background: white; border-radius: 10px; border: 1px solid #dee2e6; overflow: hidden; margin-bottom: 20px; }
        .section-header { background: #e9ecef; padding: 10px 15px; font-weight: bold; font-size: 0.9rem; border-left: 4px solid var(--blue-primary); }
        .loi-container { max-height: 400px; overflow-y: auto; }
        .loi-row { display: flex; align-items: center; padding: 12px 15px; border-bottom: 1px solid #eee; gap: 10px; }
        .loi-row:last-child { border-bottom: none; }
        
        .loi-info { flex: 2; font-size: 0.9rem; }
        .loi-score { flex: 0.5; text-align: right; font-weight: bold; }
        .loi-score.minus { color: var(--red-error); }
        .loi-score.plus { color: var(--green-success); }
        
        /* √î nh·∫≠p t√™n tr·ª±c ti·∫øp & X√≥a nhanh */
        .input-wrapper { flex: 3; display: flex; align-items: center; gap: 5px; }
        .input-name { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.85rem; outline: none; }
        .input-name:focus { border-color: var(--blue-primary); background: #f0f7ff; }
        .btn-clear-row { background: none; border: none; color: #ccc; cursor: pointer; font-size: 1.2rem; font-weight: bold; padding: 0 5px; }
        .btn-clear-row:hover { color: var(--red-error); }

        /* N√∫t L∆∞u */
        .btn-main { width: 100%; padding: 15px; border: none; border-radius: 8px; font-weight: bold; color: white; cursor: pointer; font-size: 1rem; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-save { background-color: #0056b3; }
        .btn-copy { background-color: #28a745; }

        /* B·∫£ng l·ªãch s·ª≠ (LS) - Theo m·∫´u ·∫£nh 635a8b.jpg */
        .ls-table { width: 100%; border-collapse: collapse; background: white; font-size: 0.85rem; }
        .ls-table th, .ls-table td { border: 1px solid #dee2e6; padding: 10px; text-align: center; }
        .ls-table th { background: #f8f9fa; color: #555; }
        .btn-del-ls { color: var(--red-error); background: none; border: none; cursor: pointer; font-weight: bold; }

        .footer-info { font-size: 0.8rem; color: #666; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="header-title">LI√äN ƒê·ªòI TH & THCS PH∆Ø·ªöC AN</div>

<div class="section-card">
    <div style="padding: 15px;">
        <div class="footer-info">* Nh·∫≠p t√™n h·ªçc sinh (VD: An, B√¨nh x2) tr·ª±c ti·∫øp v√†o d√≤ng l·ªói.</div>
        <input type="text" id="search-loi" class="search-box" placeholder="T√¨m t√™n l·ªói..." onkeyup="filterLoi()">
        
        <div class="section-header">H·ªåC T·∫¨P & T√ÅC PHONG</div>
        <div class="loi-container" id="loi-list">
            </div>
    </div>
</div>

<button class="btn-main btn-save" onclick="saveToLS()">üíæ L∆ØU D·ªÆ LI·ªÜU CH·∫§M</button>

<div class="section-card">
    <div class="section-header">üìú L·ªäCH S·ª¨ L·ªöP ƒêANG CH·ªåN (LS)</div>
    <div style="overflow-x: auto;">
        <table class="ls-table">
            <thead>
                <tr>
                    <th>Vi·ªác l√†m</th>
                    <th>Bi·ªÉu</th>
                    <th>C√° nh√¢n/T·∫≠p th·ªÉ</th>
                    <th>S·ªë l·∫ßn</th>
                    <th>T·ªïng</th>
                    <th>X√≥a</th>
                </tr>
            </thead>
            <tbody id="ls-body"></tbody>
        </table>
    </div>
</div>

<button class="btn-main btn-copy" onclick="copyTable()">üìã Copy b·∫£ng (D√°n Excel/Zalo)</button>

<script>
    [cite_start]// D·ªØ li·ªáu b√°m s√°t bi·ªÉu ƒëi·ªÉm Ph∆∞·ªõc An 2025-2026 [cite: 5]
    const DATA_PHUOC_AN = [
        { n: "Kh√¥ng ƒëeo KhƒÉn qu√†ng/Huy hi·ªáu", d: -5 },
        { n: "Kh√¥ng b·ªè √°o v√†o qu·∫ßn", d: -5 },
        { n: "M·∫∑c √°o kho√°c sai quy ƒë·ªãnh", d: -5 },
        { n: "ƒêi ch√¢n tr·∫ßn ra s√¢n/WC", d: -5 },
        { n: "ƒê·ªÉ t√≥c d√†i (Nam)", d: -5 },
        { n: "N√≥i t·ª•c, ch·ª≠i th·ªÅ", d: -10 },
        { n: "ƒêi tr·ªÖ", d: -2 },
        { n: "ƒêi·ªÉm 10", d: 10 },
        { n: "ƒêi·ªÉm 8, 9", d: 9 },
        { n: "ƒêi·ªÉm 7", d: 5 },
        { n: "ƒêi·ªÉm 0, 1, 2, 3", d: -10 },
        { n: "Ti·∫øt h·ªçc lo·∫°i A", d: 10 },
        { n: "Tr·∫£ l·∫°i c·ªßa r∆°i", d: 5 }
    ];

    let currentLS = [];

    function init() {
        const container = document.getElementById('loi-list');
        DATA_PHUOC_AN.forEach((item, index) => {
            const inputId = `input-${index}`;
            container.innerHTML += `
                <div class="loi-row">
                    <div class="loi-info">${item.n}</div>
                    <div class="loi-score ${item.d < 0 ? 'minus' : 'plus'}">${item.d > 0 ? '+' : ''}${item.d}</div>
                    <div class="input-wrapper">
                        <input type="text" class="input-name" id="${inputId}" 
                               data-name="${item.n}" data-score="${item.d}" 
                               placeholder="T√™n HS...">
                        <button class="btn-clear-row" onclick="document.getElementById('${inputId}').value=''">&times;</button>
                    </div>
                </div>`;
        });
    }

    function filterLoi() {
        const key = document.getElementById('search-loi').value.toLowerCase();
        document.querySelectorAll('.loi-row').forEach(row => {
            const text = row.querySelector('.loi-info').innerText.toLowerCase();
            row.style.display = text.includes(key) ? 'flex' : 'none';
        });
    }

    function saveToLS() {
        const inputs = document.querySelectorAll('.input-name');
        let hasNew = false;

        inputs.forEach(inp => {
            const val = inp.value.trim();
            if (val !== "") {
                let soLan = 1;
                const match = val.toLowerCase().match(/x\s*(\d+)/);
                if (match) soLan = parseInt(match[1]);

                const score = parseInt(inp.dataset.score);
                currentLS.unshift({
                    id: Date.now() + Math.random(),
                    viec: inp.dataset.name,
                    bieu: (score > 0 ? "+" : "") + score,
                    canhan: val,
                    lan: soLan,
                    tong: (score * soLan > 0 ? "+" : "") + (score * soLan)
                });
                inp.value = "";
                hasNew = true;
            }
        });

        if (hasNew) renderLS();
        else alert("Vui l√≤ng nh·∫≠p t√™n h·ªçc sinh v√†o l·ªói t∆∞∆°ng ·ª©ng!");
    }

    function renderLS() {
        const body = document.getElementById('ls-body');
        body.innerHTML = "";
        currentLS.forEach(item => {
            body.innerHTML += `
                <tr>
                    <td style="text-align:left">${item.viec}</td>
                    <td>${item.bieu}</td>
                    <td>${item.canhan}</td>
                    <td>${item.lan}</td>
                    <td style="font-weight:bold; color:${parseInt(item.tong) < 0 ? 'red' : 'green'}">${item.tong}</td>
                    <td><button class="btn-del-ls" onclick="deleteLS(${item.id})">‚úï</button></td>
                </tr>`;
        });
    }

    function deleteLS(id) {
        currentLS = currentLS.filter(x => x.id !== id);
        renderLS();
    }

    function copyTable() {
        alert("T√≠nh nƒÉng copy b·∫£ng ƒë√£ s·∫µn s√†ng!");
    }

    init();
</script>

</body>
</html>
