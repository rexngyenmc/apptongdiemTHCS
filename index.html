<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SAO ƒê·ªé PH∆Ø·ªöC AN</title>

<style>
:root{--p:#2563eb;--s:#16a34a;--a:#dc2626;--bg:#f1f5f9}
*{box-sizing:border-box}
body{margin:0;padding:10px;font-family:Arial;background:var(--bg)}

#login{
 position:fixed;inset:0;
 background:linear-gradient(135deg,#2563eb,#38bdf8);
 display:flex;flex-direction:column;
 justify-content:center;align-items:center;color:white
}
#login input{
 width:160px;padding:14px;font-size:2rem;
 border:none;border-radius:12px;text-align:center
}

.card{
 background:white;border-radius:14px;
 padding:12px;margin-bottom:12px;
 box-shadow:0 4px 10px rgba(0,0,0,.08)
}

table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #eee;text-align:center}

.search{width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;margin-bottom:8px}

input.name{width:100%;padding:6px}
input.qty{width:45px;text-align:center}

button{
 width:100%;padding:12px;border:none;border-radius:10px;
 background:#2563eb;color:white;font-weight:bold
}

.minus{color:#dc2626;font-weight:bold}
.plus{color:#16a34a;font-weight:bold}
</style>
</head>

<body>

<div id="login">
 <h2>üîê M·∫¨T M√É SAO ƒê·ªé</h2>
 <input id="pin" type="password" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
</div>

<div id="app" style="display:none">

<div class="card">
<h3>üèÜ B·∫¢NG X·∫æP H·∫†NG</h3>
<table>
<thead><tr><th>H·∫°ng</th><th>L·ªõp</th><th>ƒêi·ªÉm</th></tr></thead>
<tbody id="bxh"></tbody>
</table>
</div>

<div id="panel" class="card" style="display:none">
<h3 id="lopTitle"></h3>

<input class="search" id="search" placeholder="T√¨m l·ªói...">

<table>
<thead>
<tr><th>N·ªôi dung</th><th>ƒêi·ªÉm</th><th>HS</th><th>SL</th></tr>
</thead>
<tbody id="loiList"></tbody>
</table>

<button onclick="addLoi()">X√ÅC NH·∫¨N</button>

<h4>CHI TI·∫æT</h4>
<table>
<thead>
<tr><th>N·ªôi dung</th><th>HS</th><th>SL</th><th>ƒêi·ªÉm</th></tr>
</thead>
<tbody id="logList"></tbody>
<tr><td colspan="3">T·ªïng</td><td id="tong">0</td></tr>
</table>

<button style="background:#dc2626" onclick="resetLop()">X√ìA L·ªöP</button>
</div>

</div>

<script>
// ===== C·∫§U H√åNH =====
const PIN="1234";
const LOPS=["6A1","6A2","6A3","7A1","7A2","8A1","8A2","9A1","9A2"];

const LOIS=[
 {n:"Kh√¥ng ƒëeo khƒÉn qu√†ng",d:-5},
 {n:"Kh√¥ng b·ªè √°o v√†o qu·∫ßn",d:-5},
 {n:"ƒêi tr·ªÖ",d:-2},
 {n:"N√≥i t·ª•c",d:-10},
 {n:"ƒê√°nh nhau",d:-10},
 {n:"Kh√¥ng l√†m b√†i",d:-10},
 {n:"ƒêi·ªÉm 10",d:10},
 {n:"Nh·∫∑t c·ªßa r∆°i tr·∫£ l·∫°i",d:5},
];

// ===== BI·∫æN =====
let db=JSON.parse(localStorage.getItem("SAODO"))||{};
let cur="";

// ===== PIN =====
pin.oninput=()=>{
 if(pin.value===PIN){
  login.style.display="none";
  app.style.display="block";
  init();
 }else if(pin.value.length===4){
  alert("Sai PIN"); pin.value="";
 }
};

// ===== KH·ªûI T·∫†O =====
function init(){
 LOPS.forEach(l=>{ if(!db[l]) db[l]={total:100,logs:[]}; });
 renderBXH();
 renderLoi();
}

// ===== BXH =====
function renderBXH(){
 bxh.innerHTML="";
 [...LOPS].sort((a,b)=>db[b].total-db[a].total).forEach((l,i)=>{
  bxh.innerHTML+=`
<tr onclick="chonLop('${l}')">
<td>${i+1}</td><td>${l}</td>
<td class="${db[l].total<100?'minus':'plus'}">${db[l].total}</td>
</tr>`;
 });
 localStorage.setItem("SAODO",JSON.stringify(db));
}

// ===== CH·ªåN L·ªöP =====
function chonLop(l){
 cur=l;
 panel.style.display="block";
 lopTitle.innerText="CH·∫§M ƒêI·ªÇM L·ªöP "+l;
 renderLog();
}

// ===== DANH S√ÅCH L·ªñI =====
function renderLoi(){
 loiList.innerHTML="";
 LOIS.forEach((e,i)=>{
  loiList.innerHTML+=`
<tr>
<td>${e.n}</td>
<td class="${e.d<0?'minus':'plus'}">${e.d}</td>
<td><input class="name" id="n${i}"></td>
<td><input class="qty" id="q${i}" type="number" value="1" min="1"></td>
</tr>`;
 });
}

// ===== TH√äM L·ªñI =====
function addLoi(){
 LOIS.forEach((e,i)=>{
  let name=document.getElementById("n"+i).value.trim();
  let sl=parseInt(document.getElementById("q"+i).value)||1;
  if(name){
   let diem=e.d*sl;
   db[cur].logs.push({n:e.n,hs:name,sl,diem});
   db[cur].total+=diem;
   document.getElementById("n"+i).value="";
   document.getElementById("q"+i).value=1;
  }
 });
 renderBXH(); renderLog();
}

// ===== CHI TI·∫æT =====
function renderLog(){
 logList.innerHTML="";
 let t=0;
 db[cur].logs.forEach((l,i)=>{
  t+=l.diem;
  logList.innerHTML+=`
<tr onclick="xoa(${i})">
<td>${l.n}</td><td>${l.hs}</td><td>${l.sl}</td>
<td class="${l.diem<0?'minus':'plus'}">${l.diem}</td>
</tr>`;
 });
 tong.innerText=t;
}

// ===== X√ìA D√íNG =====
function xoa(i){
 if(confirm("X√≥a d√≤ng n√†y?")){
  db[cur].total-=db[cur].logs[i].diem;
  db[cur].logs.splice(i,1);
  renderBXH(); renderLog();
 }
}

// ===== RESET L·ªöP =====
function resetLop(){
 if(confirm("X√≥a to√†n b·ªô ƒëi·ªÉm l·ªõp n√†y?")){
  db[cur]={total:100,logs:[]};
  renderBXH(); renderLog();
 }
}
</script>
</body>
</html>
