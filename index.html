<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω ƒêi·ªÉm Sao ƒê·ªè THCS</title>
    <style>
        :root {
            --primary-color: #1976d2;
            --accent-color: #d32f2f;
            --bg-color: #f0f4f8;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg-color); margin: 0; padding: 15px; color: #333; }
        h1 { text-align: center; color: var(--primary-color); font-size: 1.5rem; margin-bottom: 20px; }

        .container { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; max-width: 1000px; margin: 0 auto; }

        /* B·∫£ng x·∫øp h·∫°ng */
        .table-section { flex: 1; min-width: 320px; background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
        th, td { border-bottom: 1px solid #eee; padding: 12px 8px; text-align: center; }
        th { background: var(--primary-color); color: white; border-radius: 4px; }

        .lop-row { cursor: pointer; transition: 0.2s; }
        .lop-row:hover { background: #e3f2fd; }
        .dang-chon { background: #fff9c4 !important; outline: 2px solid #ffd600; }

        /* B·∫£ng nh·∫≠p l·ªói */
        .panel-section { width: 320px; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.15); display: none; position: sticky; top: 20px; height: fit-content; }
        .panel-section h3 { text-align: center; margin-top: 0; color: var(--accent-color); border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        .loi-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; background: #fafafa; padding: 8px; border-radius: 6px; }
        .loi-item span { font-size: 0.9rem; font-weight: 500; }
        input[type=number] { width: 50px; padding: 8px; border: 1px solid #ccc; border-radius: 6px; text-align: center; }

        /* N√∫t b·∫•m */
        .btn { width: 100%; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        .btn-apply { background: #2e7d32; color: white; font-size: 1rem; }
        .btn-apply:hover { background: #1b5e20; }
        .btn-zalo { background: #1976d2; color: white; }
        .btn-reset { background: #9e9e9e; color: white; font-size: 0.8rem; }

        @media (max-width: 600px) {
            .container { flex-direction: column; }
            .panel-section { width: auto; position: static; }
        }
    </style>
</head>
<body>

<h1>B·∫¢NG ƒêI·ªÇM SAO ƒê·ªé TR·ª∞C TUY·∫æN</h1>

<div class="container">
    <div class="table-section">
        <table>
            <thead>
                <tr>
                    <th>H·∫°ng</th>
                    <th>L·ªõp</th>
                    <th>ƒêi·ªÉm</th>
                </tr>
            </thead>
            <tbody id="body-bang">
                <tr class="lop-row" data-lop="6A" onclick="chonLop(this)"> <td class="xephang"></td> <td>6A</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="6B" onclick="chonLop(this)"> <td class="xephang"></td> <td>6B</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="6C" onclick="chonLop(this)"> <td class="xephang"></td> <td>6C</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="7A" onclick="chonLop(this)"> <td class="xephang"></td> <td>7A</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="7B" onclick="chonLop(this)"> <td class="xephang"></td> <td>7B</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="7C" onclick="chonLop(this)"> <td class="xephang"></td> <td>7C</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="8A" onclick="chonLop(this)"> <td class="xephang"></td> <td>8A</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="8B" onclick="chonLop(this)"> <td class="xephang"></td> <td>8B</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="8C" onclick="chonLop(this)"> <td class="xephang"></td> <td>8C</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="9A" onclick="chonLop(this)"> <td class="xephang"></td> <td>9A</td> <td class="tong">100</td> </tr>
                <tr class="lop-row" data-lop="9B" onclick="chonLop(this)"> <td class="xephang"></td> <td>9B</td> <td class="tong">100</td> </tr>
            </tbody>
        </table>
        <button class="btn btn-zalo" onclick="xuatBaoCao()">üìã Sao ch√©p b√°o c√°o g·ª≠i Zalo</button>
        <button class="btn btn-reset" onclick="resetDiem()">üîÑ L√†m m·ªõi to√†n b·ªô (Tu·∫ßn m·ªõi)</button>
    </div>

    <div id="panel" class="panel-section">
        <h3 id="tenlop">L·ªõp</h3>
        <div class="loi-item"><span>ƒêi h·ªçc mu·ªôn (-2)</span><input type="number" min="0" data-diem="2" class="input-loi"></div>
        <div class="loi-item"><span>ƒê·ªìng ph·ª•c (-5)</span><input type="number" min="0" data-diem="5" class="input-loi"></div>
        <div class="loi-item"><span>KhƒÉn qu√†ng (-3)</span><input type="number" min="0" data-diem="3" class="input-loi"></div>
        <div class="loi-item"><span>·ªín √†o/L√†m vi·ªác ri√™ng (-2)</span><input type="number" min="0" data-diem="2" class="input-loi"></div>
        <div class="loi-item"><span>V·ªá sinh l·ªõp k√©m (-5)</span><input type="number" min="0" data-diem="5" class="input-loi"></div>
        
        <button class="btn btn-apply" onclick="apDung()">C·∫¨P NH·∫¨T ƒêI·ªÇM</button>
    </div>
</div>

<script>
let lopDangChon = null;

// Kh·ªüi t·∫°o ·ª©ng d·ª•ng
window.onload = () => {
    loadData();
    xepHang();
};

function chonLop(row) {
    document.querySelectorAll(".lop-row").forEach(r => r.classList.remove("dang-chon"));
    row.classList.add("dang-chon");
    
    lopDangChon = row;
    document.getElementById("panel").style.display = "block";
    document.getElementById("tenlop").innerText = "Ch·∫•m ƒëi·ªÉm L·ªõp " + row.dataset.lop;
    document.querySelectorAll(".input-loi").forEach(i => i.value = 0);
    
    if(window.innerWidth < 600) {
        document.getElementById("panel").scrollIntoView({behavior: "smooth"});
    }
}

function apDung() {
    if(!lopDangChon) return;
    
    let tongTru = 0;
    document.querySelectorAll(".input-loi").forEach(i => {
        tongTru += (Number(i.value) || 0) * Number(i.dataset.diem);
    });

    let diemMoi = 100 - tongTru;
    if (diemMoi < 0) diemMoi = 0;

    lopDangChon.querySelector(".tong").innerText = diemMoi;
    lopDangChon.dataset.tong = diemMoi;

    xepHang();
    saveData();
    
    // Hi·ªáu ·ª©ng ph·∫£n h·ªìi
    const btn = document.querySelector(".btn-apply");
    btn.innerText = "ƒê√É C·∫¨P NH·∫¨T!";
    setTimeout(() => btn.innerText = "C·∫¨P NH·∫¨T ƒêI·ªÇM", 1000);
}

function xepHang() {
    let rows = Array.from(document.querySelectorAll(".lop-row"));
    rows.sort((a,b) => (Number(b.dataset.tong) || 100) - (Number(a.dataset.tong) || 100));

    let container = document.getElementById("body-bang");
    rows.forEach((r, i) => {
        let h = i + 1;
        let icon = h;
        if(h==1) icon="ü•á";
        else if(h==2) icon="ü•à";
        else if(h==3) icon="ü•â";
        r.querySelector(".xephang").innerText = icon;
        container.appendChild(r);
    });
}

function saveData() {
    const data = {};
    document.querySelectorAll(".lop-row").forEach(r => {
        data[r.dataset.lop] = r.querySelector(".tong").innerText;
    });
    localStorage.setItem('saoDoData_V1', JSON.stringify(data));
}

function loadData() {
    const saved = localStorage.getItem('saoDoData_V1');
    if (saved) {
        const data = JSON.parse(saved);
        document.querySelectorAll(".lop-row").forEach(r => {
            if(data[r.dataset.lop]) {
                r.querySelector(".tong").innerText = data[r.dataset.lop];
                r.dataset.tong = data[r.dataset.lop];
            }
        });
    }
}

function resetDiem() {
    if(confirm("X√≥a to√†n b·ªô ƒëi·ªÉm c≈© ƒë·ªÉ b·∫Øt ƒë·∫ßu tu·∫ßn m·ªõi?")) {
        document.querySelectorAll(".lop-row").forEach(r => {
            r.querySelector(".tong").innerText = 100;
            r.dataset.tong = 100;
        });
        xepHang();
        saveData();
        document.getElementById("panel").style.display = "none";
    }
}

function xuatBaoCao() {
    let text = "üìã B√ÅO C√ÅO T·ªîNG K·∫æT SAO ƒê·ªé\n";
    text += "---------------------------\n";
    let rows = document.querySelectorAll(".lop-row");
    rows.forEach(r => {
        let h = r.querySelector(".xephang").innerText;
        let l = r.dataset.lop;
        let d = r.querySelector(".tong").innerText;
        text += `${h}. L·ªõp ${l}: ${d} ƒëi·ªÉm\n`;
    });
    
    navigator.clipboard.writeText(text).then(() => {
        alert("ƒê√£ sao ch√©p b√°o c√°o v√†o b·ªô nh·ªõ t·∫°m!");
    });
}
</script>

</body>
</html>
\
