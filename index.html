<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>H·ªá Th·ªëng Ph∆∞·ªõc An 2026 - Si√™u C·∫•p</title>
    <style>
        :root { --p: #1a73e8; --s: #34a853; --w: #fbbc05; --r: #ea4335; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #f0f2f5; }
        .screen { display: none; padding: 20px; max-width: 800px; margin: auto; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from {opacity:0} to {opacity:1} }
        
        /* Menu ch√≠nh */
        #home-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; gap: 20px; }
        .btn-main { width: 100%; max-width: 400px; padding: 25px; border: none; border-radius: 20px; color: white; font-size: 1.3rem; font-weight: 800; cursor: pointer; box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
        .bg-gv { background: var(--p); } .bg-sd { background: var(--s); } .bg-bxh { background: var(--w); color: #000; }

        /* T√¨m ki·∫øm & Danh s√°ch t√™n */
        .search-box { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #ddd; margin-bottom: 10px; font-size: 1rem; box-sizing: border-box; }
        .list-container { max-height: 200px; overflow-y: auto; background: white; border-radius: 12px; border: 1px solid #eee; margin-bottom: 15px; }
        .user-item { padding: 12px 15px; border-bottom: 1px solid #eee; cursor: pointer; text-align: left; }
        .user-item:hover { background: #e8f0fe; }
        .user-item.active { background: var(--p); color: white; }

        /* L·ªõp h√†ng ngang */
        .class-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
        .btn-cl { padding: 15px 5px; border: 2px solid #ddd; border-radius: 10px; background: white; font-weight: bold; cursor: pointer; }
        .btn-cl.active { background: var(--p); color: white; }

        /* Ch·∫•m l·ªói chi ti·∫øt */
        .card { background: white; border-radius: 15px; padding: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-bottom: 15px; text-align: left; }
        .item-row { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; }
        .item-row.selected { background: #fff9c4; border-left: 5px solid var(--w); }
        .detail-area { display: none; padding: 15px; background: #fafafa; border: 1px solid #eee; border-radius: 10px; margin-top: 5px; margin-bottom: 10px; }
        input[type="text"], input[type="number"] { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
        
        /* BXH r·ª±c r·ª° */
        #bxh-screen { background: radial-gradient(circle, #001f3f, #000); color: white; text-align: center; min-height: 100vh; }
        .rank-row { display: flex; align-items: center; background: rgba(255,255,255,0.1); margin: 10px auto; padding: 20px; border-radius: 15px; max-width: 900px; }
        .rank-1 { background: linear-gradient(90deg, #ffd700, #ff8f00); color: #000; font-weight: bold; transform: scale(1.05); }
    </style>
</head>
<body>

<div id="home-screen" class="screen" style="display:flex">
    <h1>PH∆Ø·ªöC AN 2026</h1>
    <button class="btn-main bg-gv" onclick="init('GV')">GI√ÅO VI√äN</button>
    <button class="btn-main bg-sd" onclick="init('SD')">SAO ƒê·ªé</button>
    <button class="btn-main bg-bxh" onclick="init('BXH')">B·∫¢NG V√ÄNG</button>
</div>

<div id="auth-screen" class="screen">
    <button onclick="location.reload()" style="padding:10px; margin-bottom:10px">‚Üê QUAY L·∫†I</button>
    <div class="card">
        <h3 id="auth-title">CH·ªåN NG∆Ø·ªúI CH·∫§M</h3>
        <input type="password" id="pin-input" class="search-box" placeholder="Nh·∫≠p PIN..." style="display:none; text-align:center">
        <input type="text" id="search-user" class="search-box" placeholder="T√¨m ki·∫øm t√™n..." onkeyup="filterUser()">
        <div id="user-list" class="list-container"></div>
        <button class="btn-main bg-gv" style="padding:15px" onclick="verifyAuth()">TI·∫æP T·ª§C</button>
    </div>
</div>

<div id="class-screen" class="screen">
    <button onclick="showScreen('auth-screen')" style="padding:10px; margin-bottom:10px">‚Üê QUAY L·∫†I</button>
    <div class="card">
        <h3>CH·ªåN L·ªöP (H√ÄNG NGANG)</h3>
        <div class="class-grid" id="class-btns"></div>
    </div>
</div>

<div id="score-screen" class="screen">
    <button onclick="showScreen('class-screen')" style="padding:10px; margin-bottom:10px">‚Üê CH·ªåN L·∫†I L·ªöP</button>
    <div class="card">
        <h2 id="target-l" style="margin:0; color:var(--p)"></h2>
        <p id="info-p" style="margin:5px 0; color:#666"></p>
    </div>
    <div id="criteria-list"></div>
    <button class="btn-main bg-gv" style="width:100%; margin:20px 0" onclick="save()">L∆ØU & ƒê·ªíNG B·ªò</button>
</div>

<div id="bxh-screen" class="screen">
    <h1 style="color:var(--w); font-size:3rem">üèÜ B·∫¢NG V√ÄNG THI ƒêUA</h1>
    <div id="bxh-content"></div>
    <button class="btn-main" onclick="location.reload()" style="background:#444; width:200px; margin-top:20px">THO√ÅT</button>
</div>
<script>
const DANH_SACH_GV = ["Th·∫ßy An", "C√¥ B√¨nh", "Th·∫ßy Chi", "C√¥ Di·ªáp", "Th·∫ßy Giang"]; // B·∫°n t·ª± th√™m ti·∫øp
const DANH_SACH_SD = ["Sao ƒê·ªè 1", "Sao ƒê·ªè 2", "Sao ƒê·ªè 3", "Sao ƒê·ªè 4"]; 
const LOP = ["6A1","6A2","6A3","7A1","7A2","8A1","8A2","9A1","9A2"];

// ƒê·ª¶ L·ªñI T·ª™ FILE WORD
const LOI_SD = [
    {h: "T√°c phong", ds: [
        {n:"Kh√¥ng khƒÉn qu√†ng/huy hi·ªáu", d:-5}, {n:"Kh√¥ng b·ªè √°o v√†o qu·∫ßn", d:-5},
        {n:"ƒê·ªìng ph·ª•c sai quy ƒë·ªãnh", d:-5}, {n:"ƒêi ch√¢n tr·∫ßn", d:-5},
        {n:"T√≥c d√†i (nam)/Nhu·ªôm t√≥c", d:-10}, {n:"ƒêi tr·ªÖ", d:-2}
    ]},
    {h: "N·ªÅ n·∫øp - ƒê·∫°o ƒë·ª©c", ds: [
        {n:"N√≥i t·ª•c ch·ª≠i th·ªÅ", d:-10}, {n:"ƒÇn qu√† v·∫∑t sai n∆°i", d:-10},
        {n:"B·ªè r√°c sai n∆°i", d:-20}, {n:"Chui r√†o/Ph√° h√†ng r√†o", d:-30}
    ]}
];
const LOI_GV = [
    {h: "H·ªçc t·∫≠p (S·ªï ƒë·∫ßu b√†i)", ds: [
        {n:"1 ti·∫øt A", d:10}, {n:"1 ti·∫øt B", d:5}, {n:"1 ti·∫øt C", d:-5}, {n:"1 ti·∫øt D", d:-10},
        {n:"ƒêi·ªÉm 10", d:10}, {n:"ƒêi·ªÉm 8,9", d:9}, {n:"ƒêi·ªÉm 4", d:-5}, {n:"ƒêi·ªÉm 0,1,2,3", d:-10},
        {n:"Kh√¥ng thu·ªôc b√†i/L√†m BT", d:-10}, {n:"M·∫•t s·ªï ƒë·∫ßu b√†i", d:-50}
    ]}
];

let role = "", user = "", lopSelected = "";

function init(r) {
    role = r;
    showScreen('auth-screen');
    document.getElementById('auth-title').innerText = "AI ƒêANG CH·∫§M? (" + r + ")";
    document.getElementById('pin-input').style.display = (r === 'GV' ? 'none' : 'block');
    renderUserList();
}

function filterUser() {
    let val = document.getElementById('search-user').value.toLowerCase();
    let items = document.querySelectorAll('.user-item');
    items.forEach(i => {
        i.style.display = i.innerText.toLowerCase().includes(val) ? "block" : "none";
    });
}

function renderUserList() {
    let list = role === 'GV' ? DANH_SACH_GV : DANH_SACH_SD;
    let html = "";
    list.forEach(name => {
        html += `<div class="user-item" onclick="selectUser(this)">${name}</div>`;
    });
    document.getElementById('user-list').innerHTML = html;
}

function selectUser(el) {
    document.querySelectorAll('.user-item').forEach(i => i.classList.remove('active'));
    el.classList.add('active');
    user = el.innerText;
}

function verifyAuth() {
    if(!user) return alert("Ch·ªçn t√™n ng∆∞·ªùi ch·∫•m!");
    if(role === 'SD' && document.getElementById('pin-input').value !== '1234') return alert("Sai PIN!");
    if(role === 'BXH' && document.getElementById('pin-input').value !== '9999') return alert("Sai PIN!");
    
    if(role === 'BXH') return showScreen('bxh-screen');
    
    showScreen('class-screen');
    let h = "";
    LOP.forEach(l => h += `<button class="btn-cl" onclick="chooseLop('${l}', this)">${l}</button>`);
    document.getElementById('class-btns').innerHTML = h;
}

function chooseLop(l, btn) {
    lopSelected = l;
    document.querySelectorAll('.btn-cl').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    setTimeout(() => showScore(), 300);
}

function showScore() {
    showScreen('score-screen');
    document.getElementById('target-l').innerText = "L·ªõp: " + lopSelected;
    document.getElementById('info-p').innerText = "Ng∆∞·ªùi ch·∫•m: " + user + " | Ng√†y: " + new Date().toLocaleDateString('vi-VN');
    
    let html = "";
    let data = role === 'GV' ? LOI_GV : LOI_SD;
    data.forEach(g => {
        html += `<h4 style="margin-top:15px">${g.h}</h4>`;
        g.ds.forEach((item, idx) => {
            let id = `row-${idx}`;
            html += `<div class="item-row" onclick="toggleItem('${id}')">
                        <span>${item.n} (${item.d > 0 ? '+'+item.d : item.d})</span>
                    </div>
                    <div class="detail-area" id="${id}">
                        <input type="text" placeholder="T√™n h·ªçc sinh vi ph·∫°m..." class="inp-hs">
                        <input type="number" placeholder="S·ªë l·∫ßn (m·∫∑c ƒë·ªãnh 1)..." class="inp-count" value="1">
                        <input type="hidden" class="inp-val" value="${item.d}">
                        <input type="hidden" class="inp-name" value="${item.n}">
                    </div>`;
        });
    });
    document.getElementById('criteria-list').innerHTML = html;
}

function toggleItem(id) {
    let el = document.getElementById(id);
    let row = el.previousElementSibling;
    if(el.style.display === "flex") {
        el.style.display = "none";
        row.classList.remove('selected');
    } else {
        el.style.display = "flex";
        row.classList.add('selected');
    }
}

function save() {
    alert("ƒê√£ l∆∞u d·ªØ li·ªáu th√†nh c√¥ng cho " + user + " ch·∫•m l·ªõp " + lopSelected);
    location.reload();
}

function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
    document.getElementById(id).style.display = 'block';
}
</script>
</body>
</html>
