<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SAO Äá» PHÆ¯á»šC AN</title>

<style>
:root{--p:#2563eb;--s:#16a34a;--a:#dc2626;--bg:#f1f5f9}
*{box-sizing:border-box}
body{margin:0;padding:10px;font-family:Arial;background:var(--bg)}

#login{
 position:fixed;inset:0;
 background:linear-gradient(135deg,#2563eb,#38bdf8);
 display:flex;flex-direction:column;
 justify-content:center;align-items:center;color:white;z-index:9
}
#login input{
 width:160px;padding:14px;font-size:2rem;
 border:none;border-radius:12px;text-align:center
}

.card{
 background:white;border-radius:14px;
 padding:12px;margin-bottom:12px;
 box-shadow:0 4px 10px rgba(0,0,0,.08)
}

table{width:100%;border-collapse:collapse;font-size:.8rem}
th,td{border:1px solid #333;padding:6px;text-align:center}
th{background:#f2f2f2}

input.name{width:100%;padding:5px}
input.qty{width:50px;text-align:center}

button{
 width:100%;padding:12px;border:none;border-radius:10px;
 background:#2563eb;color:white;font-weight:bold;margin-top:8px
}

.minus{color:#dc2626;font-weight:bold}
.plus{color:#16a34a;font-weight:bold}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
 <h2>ğŸ” Máº¬T MÃƒ SAO Äá»</h2>
 <input id="pin" type="password" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
</div>

<div id="app" style="display:none">

<!-- BXH -->
<div class="card">
<h3>ğŸ† Báº¢NG Xáº¾P Háº NG</h3>
<table>
<thead><tr><th>Háº¡ng</th><th>Lá»›p</th><th>Äiá»ƒm</th></tr></thead>
<tbody id="bxh"></tbody>
</table>
</div>

<!-- NHáº¬P LIá»†U -->
<div id="panel" class="card" style="display:none">
<h3 id="lopTitle"></h3>

<table>
<thead>
<tr>
 <th>Ná»™i dung</th>
 <th>Biá»ƒu Ä‘iá»ƒm</th>
 <th>Viá»‡c lÃ m tá»‘t / khÃ´ng tá»‘t</th>
 <th>Sá»‘ láº§n</th>
 <th>Äiá»ƒm</th>
</tr>
</thead>
<tbody id="inputBody"></tbody>
<tr>
 <td colspan="4" style="text-align:right">Tá»•ng:</td>
 <td id="tong">0</td>
</tr>
</table>

<button onclick="saveData()">ğŸ’¾ LÆ¯U VÃ€O Lá»šP</button>
</div>

</div>

<script>
// ===== Cáº¤U HÃŒNH =====
const PIN="1234";
const LOPS=["6A1","6A2","6A3","7A1","7A2","8A1","8A2","9A1","9A2"];

const LOIS=[
 {n:"KhÃ´ng Ä‘eo KhÄƒn quÃ ng/Huy hiá»‡u",d:-5},
 {n:"KhÃ´ng bá» Ã¡o vÃ o quáº§n",d:-5},
 {n:"Äi trá»…",d:-2},
 {n:"NÃ³i tá»¥c, chá»­i thá»",d:-10},
 {n:"ÄÃ¡nh nhau",d:-10},
 {n:"KhÃ´ng lÃ m bÃ i táº­p",d:-10},
 {n:"Äiá»ƒm sá»‘: 10",d:10},
 {n:"Nháº·t Ä‘Æ°á»£c cá»§a rÆ¡i tráº£ láº¡i",d:5},
];

// ===== BIáº¾N =====
let db=JSON.parse(localStorage.getItem("SAODO_V2"))||{};
let cur="";

// ===== LOGIN =====
document.getElementById("pin").addEventListener("input",()=>{
 let v=pin.value;
 if(v===PIN){
  login.style.display="none";
  app.style.display="block";
  init();
 }else if(v.length===4){
  alert("Sai PIN"); pin.value="";
 }
});

// ===== KHá»I Táº O =====
function init(){
 LOPS.forEach(l=>{ if(!db[l]) db[l]={total:100,logs:[]}; });
 renderBXH();
 renderInput();
}

// ===== BXH =====
function renderBXH(){
 bxh.innerHTML="";
 [...LOPS].sort((a,b)=>db[b].total-db[a].total).forEach((l,i)=>{
  bxh.innerHTML+=`
<tr onclick="chonLop('${l}')">
<td>${i+1}</td><td>${l}</td>
<td class="${db[l].total<100?'minus':'plus'}">${db[l].total}</td>
</tr>`;
 });
 localStorage.setItem("SAODO_V2",JSON.stringify(db));
}

// ===== CHá»ŒN Lá»šP =====
function chonLop(l){
 cur=l;
 panel.style.display="block";
 lopTitle.innerText="CHáº¤M ÄIá»‚M Lá»šP "+l;
 resetInput();
}

// ===== Táº O Báº¢NG NHáº¬P =====
function renderInput(){
 inputBody.innerHTML="";
 LOIS.forEach((e,i)=>{
  inputBody.innerHTML+=`
<tr>
<td style="text-align:left">${e.n}</td>
<td class="${e.d<0?'minus':'plus'}">${e.d}</td>
<td><input class="name" id="n${i}" placeholder="TÃªn HS..."></td>
<td><input class="qty" id="q${i}" type="number" value="1" min="1" oninput="calc()"></td>
<td id="s${i}">0</td>
</tr>`;
 });
}

// ===== RESET FORM =====
function resetInput(){
 LOIS.forEach((_,i)=>{
  document.getElementById("n"+i).value="";
  document.getElementById("q"+i).value=1;
  document.getElementById("s"+i).innerText=0;
 });
 document.getElementById("tong").innerText=0;
}

// ===== TÃNH ÄIá»‚M =====
function calc(){
 let t=0;
 LOIS.forEach((e,i)=>{
  let sl=parseInt(document.getElementById("q"+i).value)||0;
  let diem=e.d*sl;
  document.getElementById("s"+i).innerText=diem;
  t+=diem;
 });
 document.getElementById("tong").innerText=t;
}

// ===== LÆ¯U =====
function saveData(){
 LOIS.forEach((e,i)=>{
  let name=document.getElementById("n"+i).value.trim();
  let sl=parseInt(document.getElementById("q"+i).value)||0;
  if(name && sl>0){
   let diem=e.d*sl;
   db[cur].logs.push({n:e.n,hs:name,sl,diem});
   db[cur].total+=diem;
  }
 });
 renderBXH();
 resetInput();
 alert("ÄÃ£ lÆ°u vÃ o lá»›p "+cur);
}
</script>

</body>
</html>
