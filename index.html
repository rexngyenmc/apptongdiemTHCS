<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Há»‡ Thá»‘ng Sao Äá» PhÆ°á»›c An 2026</title>
    <style>
        :root { --p: #0056b3; --s: #2e7d32; --a: #d32f2f; --bg: #f0f8ff; --gold: #ffd700; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg); margin: 0; padding: 10px; padding-bottom: 120px; }
        
        /* HEADER */
        .header { background: white; color: var(--p); padding: 20px; border-radius: 20px; text-align: center; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-bottom: 5px solid var(--p); }

        /* MÃ€N HÃŒNH KHÃ“A */
        #login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--p); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; color: white; }
        .pin-input { width: 150px; padding: 15px; border-radius: 12px; border: none; font-size: 2rem; text-align: center; letter-spacing: 5px; font-weight: bold; margin: 20px 0; }

        #main-content { display: none; max-width: 1200px; margin: 0 auto; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .container { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
        .card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); flex: 1; min-width: 320px; }

        /* Báº¢NG Xáº¾P Háº NG & RANK */
        table { width: 100%; border-collapse: collapse; }
        td, th { padding: 12px 5px; text-align: center; border-bottom: 1px solid #f0f0f0; }
        .rank { width: 30px; height: 30px; line-height: 30px; display: inline-block; border-radius: 50%; background: #eee; font-size: 0.8rem; font-weight: bold; }
        .rank-1 { background: var(--gold); }
        .rank-2 { background: #c0c0c0; }
        .rank-3 { background: #cd7f32; color: white; }

        /* AI NHáº¬N XÃ‰T */
        .ai-box { background: #e3f2fd; border-left: 5px solid var(--p); padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .ai-title { font-weight: bold; color: var(--p); font-size: 0.8rem; display: block; margin-bottom: 5px; }

        /* FORM NHáº¬P */
        .scroll-form { max-height: 400px; overflow-y: auto; padding-right: 5px; }
        .group-title { background: #f8f9fa; color: var(--p); padding: 8px; font-weight: bold; margin-top: 15px; font-size: 0.8rem; border-radius: 5px; }
        .loi-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f1f1f1; }
        input[type=number] { width: 50px; padding: 8px; border-radius: 8px; border: 1px solid #ddd; text-align: center; font-weight: bold; }

        /* NÃšT Báº¤M */
        .btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; font-size: 1rem; }
        .btn-apply { background: var(--p); color: white; }
        .btn-zalo { background: #0068ff; color: white; }

        .lop-row { cursor: pointer; }
        .dang-chon { background: #fff9c4 !important; }

        /* TRANG TRÃ CUá»I TRANG */
        .decor { position: fixed; bottom: 0; left: 0; right: 0; height: 60px; pointer-events: none; display: flex; align-items: flex-end; justify-content: space-between; padding: 0 30px; }
    </style>
</head>
<body>

<div id="login-screen">
    <div style="font-size: 4rem;">ğŸ«</div>
    <h2>SAO Äá» PHÆ¯á»šC AN</h2>
    <input type="password" id="pin-input" class="pin-input" placeholder="****" maxlength="4" oninput="checkPin()">
    <p>Vui lÃ²ng nháº­p mÃ£ PIN Ä‘á»ƒ báº¯t Ä‘áº§u</p>
</div>

<div id="main-content">
    <div class="header">
        <h1 style="margin:0;">Sá»” TAY SAO Äá» 2026</h1>
        <div style="color: #666; font-size: 0.8rem; margin-top: 5px;">ğŸ“ TrÆ°á»ng TH&THCS PhÆ°á»›c An</div>
    </div>

    <div class="container">
        <div class="card">
            <h3 style="margin-top:0;">ğŸ† Báº£ng Xáº¿p Háº¡ng</h3>
            <table>
                <thead><tr><th>Háº¡ng</th><th>Lá»›p</th><th>Äiá»ƒm</th></tr></thead>
                <tbody id="body-bang">
                    <script>
                        const lops = ['6A','6B','6C','7A','7B','7C','8A','8B','8C','9A','9B'];
                        lops.forEach(l => {
                            document.write(`<tr class="lop-row" data-lop="${l}" onclick="chonLop(this)"><td class="rank-cell"></td><td><b>${l}</b></td><td class="tong">100</td></tr>`);
                        });
                    </script>
                </tbody>
            </table>
            <button class="btn btn-zalo" onclick="xuatZalo()">ğŸ”µ Xuáº¥t bÃ¡o cÃ¡o Zalo</button>
            <button onclick="resetTuan()" style="background:none; border:none; color:red; font-size:0.7rem; width:100%; margin-top:20px; cursor:pointer;">ğŸ”„ Reset Ä‘iá»ƒm tuáº§n má»›i</button>
        </div>

        <div id="panel" class="card" style="display:none; flex: 1.5;">
            <div class="ai-box">
                <span class="ai-title">ğŸ¤– AI NHáº¬N XÃ‰T:</span>
                <p id="ai-text" style="margin:0; font-size: 0.85rem; color: #333;">Äang chá» dá»¯ liá»‡u...</p>
            </div>
            <h3 id="tenlop" style="text-align:center; color: var(--p); margin-top:0;">Lá»›p</h3>
            <div class="scroll-form" id="form-nhap">
                <div class="group-title">1. TÃC PHONG (-5Ä‘)</div>
                <div class="loi-item"><span>KhÄƒn quÃ ng/Äá»“ng phá»¥c</span><input type="number" id="l1" data-d="-5"></div>
                <div class="loi-item"><span>Äá»ƒ xe/MÅ© báº£o hiá»ƒm</span><input type="number" id="l2" data-d="-5"></div>
                
                <div class="group-title">2. CHUYÃŠN Cáº¦N & TRáº¬T Tá»°</div>
                <div class="loi-item"><span>Äi trá»…/Váº¯ng</span><input type="number" id="l3" data-d="-5"></div>
                <div class="loi-item"><span>NÃ³i chuyá»‡n/SH/TD</span><input type="number" id="l4" data-d="-10"></div>

                <div class="group-title">3. Há»ŒC Táº¬P (Cá»˜NG/TRá»ª)</div>
                <div class="loi-item"><span>Äiá»ƒm 10/Tiáº¿t A (+)</span><input type="number" id="l5" data-d="10"></div>
                <div class="loi-item"><span>Äiá»ƒm kÃ©m/Tiáº¿t C,D (-)</span><input type="number" id="l6" data-d="-10"></div>

                <div class="group-title">4. Vá»† SINH (-100Ä‘)</div>
                <div class="loi-item"><span>Bá» rÃ¡c trong lá»›p</span><input type="number" id="l7" data-d="-100"></div>
            </div>
            <button class="btn btn-apply" onclick="apDung()">LÆ¯U Káº¾T QUáº¢</button>
        </div>
    </div>
</div>

<div class="decor">
    <span>ğŸŒ³</span><span>ğŸ«</span><span>ğŸŒ³</span>
</div>

<script>
const PIN = "1234";
let dataLoi = {};

function checkPin() {
    if (document.getElementById("pin-input").value === PIN) {
        document.getElementById("login-screen").style.display = "none";
        document.getElementById("main-content").style.display = "block";
        loadData(); xepHang();
    }
}

function chonLop(row) {
    document.querySelectorAll(".lop-row").forEach(r => r.classList.remove("dang-chon"));
    row.classList.add("dang-chon");
    document.getElementById("panel").style.display = "block";
    document.getElementById("tenlop").innerText = "Äang cháº¥m: Lá»›p " + row.dataset.lop;
    const saved = dataLoi[row.dataset.lop] || {};
    document.querySelectorAll("#form-nhap input").forEach(i => i.value = saved[i.id] || 0);
    capNhatAI(row.dataset.lop);
}

function apDung() {
    const row = document.querySelector(".lop-row.dang-chon");
    if(!row) return;
    const tenLop = row.dataset.lop;
    let tong = 0;
    let tempLoi = {};
    document.querySelectorAll("#form-nhap input").forEach(i => {
        let val = Number(i.value) || 0;
        tong += (val * Number(i.dataset.d));
        tempLoi[i.id] = val;
    });
    dataLoi[tenLop] = tempLoi;
    let diemFinal = 100 + tong;
    row.querySelector(".tong").innerText = diemFinal;
    row.dataset.tong = diemFinal;

    xepHang(); saveData(); capNhatAI(tenLop);
    alert("ÄÃ£ lÆ°u Ä‘iá»ƒm lá»›p " + tenLop);
}

function xepHang() {
    let rows = Array.from(document.querySelectorAll(".lop-row"));
    rows.sort((a,b) => (Number(b.dataset.tong) || 100) - (Number(a.dataset.tong) || 100));
    let container = document.getElementById("body-bang");
    rows.forEach((r, i) => {
        let h = i + 1;
        let b = h === 1 ? 'rank-1' : h === 2 ? 'rank-2' : h === 3 ? 'rank-3' : '';
        let icon = h === 1 ? 'ğŸ¥‡' : h === 2 ? 'ğŸ¥ˆ' : h === 3 ? 'ğŸ¥‰' : h;
        r.querySelector(".rank-cell").innerHTML = `<span class="rank ${b}">${icon}</span>`;
        container.appendChild(r);
    });
}

function capNhatAI(tenLop) {
    const row = document.querySelector(`.lop-row[data-lop="${tenLop}"]`);
    const diem = Number(row.dataset.tong) || 100;
    let txt = diem >= 100 ? "Lá»›p duy trÃ¬ ná»n náº¿p ráº¥t tá»‘t. HÃ£y tiáº¿p tá»¥c phÃ¡t huy phong Ä‘á»™ dáº«n Ä‘áº§u!" : 
              diem >= 80 ? "Ná»n náº¿p á»•n Ä‘á»‹nh nhÆ°ng váº«n cÃ²n lá»—i nhá». Cáº§n nháº¯c nhá»Ÿ Ä‘á»ƒ cáº£i thiá»‡n." : 
              "Vi pháº¡m nhiá»u má»¥c quan trá»ng. Äá» nghá»‹ GVCN cháº¥n chá»‰nh ká»· luáº­t ngay.";
    document.getElementById("ai-text").innerText = `Lá»›p ${tenLop}: ${txt}`;
}

function xuatZalo() {
    let msg = "ğŸ“‹ BÃO CÃO THI ÄUA PHÆ¯á»šC AN\n";
    document.querySelectorAll(".lop-row").forEach((r, i) => {
        msg += `${i+1}. Lá»›p ${r.dataset.lop}: ${r.querySelector(".tong").innerText}Ä‘\n`;
    });
    navigator.clipboard.writeText(msg + "\n---\nBy truongkycaonguyen").then(() => alert("ÄÃ£ copy bÃ¡o cÃ¡o Ä‘á»ƒ gá»­i Zalo!"));
}

function saveData() {
    localStorage.setItem('pa_v5_data', JSON.stringify({
        diem: Array.from(document.querySelectorAll(".lop-row")).map(r => ({l: r.dataset.lop, d: r.dataset.tong})),
        loi: dataLoi
    }));
}

function loadData() {
    const raw = JSON.parse(localStorage.getItem('pa_v5_data'));
    if (raw) {
        if (raw.diem) raw.diem.forEach(item => {
            let r = document.querySelector(`.lop-row[data-lop="${item.l}"]`);
            if(r) { 
                r.querySelector(".tong").innerText = item.d || 100; 
                r.dataset.tong = item.d || 100; 
            }
        });
        dataLoi = raw.loi || {};
    }
}

function resetTuan() {
    if(confirm("XÃ¡c nháº­n xÃ³a háº¿t Ä‘iá»ƒm Ä‘á»ƒ báº¯t Ä‘áº§u tuáº§n má»›i?")) {
        localStorage.clear(); location.reload();
    }
}
</script>
</body>
</html>






































